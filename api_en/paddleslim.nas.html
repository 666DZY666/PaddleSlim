

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>paddleslim.nas package &mdash; PaddleSlim 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="PaddleSlim 1.0 documentation" href="../index.html"/>
        <link rel="up" title="API Documents" href="index_en.html"/>
        <link rel="next" title="paddleslim.nas.one_shot package" href="paddleslim.nas.one_shot.html"/>
        <link rel="prev" title="paddleslim.quant package" href="paddleslim.quant.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index_en.html" class="icon icon-home"> PaddleSlim
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">中文文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro_en.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install_en.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/index_en.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index_en.html">Aadvanced Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index_en.html">API Documents</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="paddleslim.analysis.html">paddleslim.analysis package</a></li>
<li class="toctree-l2"><a class="reference internal" href="paddleslim.prune.html">paddleslim.prune package</a></li>
<li class="toctree-l2"><a class="reference internal" href="paddleslim.dist.html">paddleslim.dist package</a></li>
<li class="toctree-l2"><a class="reference internal" href="paddleslim.quant.html">paddleslim.quant package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">paddleslim.nas package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="paddleslim.nas.one_shot.html">paddleslim.nas.one_shot package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-paddleslim.nas.sa_nas">paddleslim.nas.sa_nas module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="paddleslim.nas.one_shot.html">paddleslim.nas.one_shot package</a></li>
<li class="toctree-l2"><a class="reference internal" href="paddleslim.pantheon.html">paddleslim.pantheon package</a></li>
<li class="toctree-l2"><a class="reference internal" href="search_space_en.html">search space</a></li>
<li class="toctree-l2"><a class="reference internal" href="table_latency_en.html">Table about hardware lantency</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../model_zoo_en.html">Model Zoo</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index_en.html">PaddleSlim</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index_en.html">Docs</a> &raquo;</li>
      
          <li><a href="index_en.html">API Documents</a> &raquo;</li>
      
    <li>paddleslim.nas package</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api_en/paddleslim.nas.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="paddleslim-nas-package">
<h1>paddleslim.nas package<a class="headerlink" href="#paddleslim-nas-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="paddleslim.nas.one_shot.html">paddleslim.nas.one_shot package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="paddleslim.nas.one_shot.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="paddleslim.nas.one_shot.html#module-paddleslim.nas.one_shot.one_shot_nas">paddleslim.nas.one_shot.one_shot_nas module</a></li>
<li class="toctree-l2"><a class="reference internal" href="paddleslim.nas.one_shot.html#module-paddleslim.nas.one_shot.super_mnasnet">paddleslim.nas.one_shot.super_mnasnet module</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-paddleslim.nas.sa_nas">
<span id="paddleslim-nas-sa-nas-module"></span><h2>paddleslim.nas.sa_nas module<a class="headerlink" href="#module-paddleslim.nas.sa_nas" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="paddleslim.nas.sa_nas.SANAS">
<em class="property">class </em><code class="descclassname">paddleslim.nas.sa_nas.</code><code class="descname">SANAS</code><span class="sig-paren">(</span><em>configs</em>, <em>server_addr=(''</em>, <em>8881)</em>, <em>init_temperature=None</em>, <em>reduce_rate=0.85</em>, <em>search_steps=300</em>, <em>init_tokens=None</em>, <em>save_checkpoint='nas_checkpoint'</em>, <em>load_checkpoint=None</em>, <em>is_server=True</em><span class="sig-paren">)</span><a class="headerlink" href="#paddleslim.nas.sa_nas.SANAS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>SANAS(Simulated Annealing Neural Architecture Search) is a neural architecture search algorithm
based on simulated annealing, used in discrete search task generally.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>configs</strong> (<em>list&lt;tuple&gt;</em>) &#8211; A list of search space configuration with format [(key, {input_size,
output_size, block_num, block_mask})]. <cite>key</cite> is the name of search space
with data type str. <cite>input_size</cite> and <cite>output_size</cite>  are input size and
output size of searched sub-network. <cite>block_num</cite> is the number of blocks
in searched network, <cite>block_mask</cite> is a list consists by 0 and 1, 0 means
normal block, 1 means reduction block.</li>
<li><strong>server_addr</strong> (<em>tuple</em>) &#8211; Server address, including ip and port of server. If ip is None or &#8220;&#8221;, will
use host ip if is_server = True. Default: (&#8220;&#8221;, 8881).</li>
<li><strong>init_temperature</strong> (<em>float</em>) &#8211; Initial temperature in SANAS. If init_temperature and init_tokens are None,
default initial temperature is 10.0, if init_temperature is None and
init_tokens is not None, default initial temperature is 1.0. The detail
configuration about the init_temperature please reference Note. Default: None.</li>
<li><strong>reduce_rate</strong> (<em>float</em>) &#8211; Reduce rate in SANAS. The detail configuration about the reduce_rate please
reference Note. Default: 0.85.</li>
<li><strong>search_steps</strong> (<em>int</em>) &#8211; The steps of searching. Default: 300.</li>
<li><strong>init_tokens</strong> (<em>list|None</em>) &#8211; Initial token. If init_tokens is None, SANAS will random generate initial
tokens. Default: None.</li>
<li><strong>save_checkpoint</strong> (<em>string|None</em>) &#8211; The directory of checkpoint to save, if set to None, not save checkpoint.
Default: &#8216;nas_checkpoint&#8217;.</li>
<li><strong>load_checkpoint</strong> (<em>string|None</em>) &#8211; The directory of checkpoint to load, if set to None, not load checkpoint.
Default: None.</li>
<li><strong>is_server</strong> (<em>bool</em>) &#8211; Whether current host is controller server. Default: True.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Why need to set initial temperature and reduce rate:<ul>
<li>SA algorithm preserve a base token(initial token is the first base token, can be set by
yourself or random generate) and base score(initial score is -1), next token will be
generated based on base token. During the search, if the score which is obtained by the
model corresponding to the token is greater than the score which is saved in SA corresponding to
base token, current token saved as base token certainly; if score which is obtained by the model
corresponding to the token is less than the score which is saved in SA correspinding to base token,
current token saved as base token with a certain probability.</li>
<li>For initial temperature, higher is more unstable, it means that SA has a strong possibility to save
current token as base token if current score is smaller than base score saved in SA.</li>
<li>For initial temperature, lower is more stable, it means that SA has a small possibility to save
current token as base token if current score is smaller than base score saved in SA.</li>
<li>For reduce rate, higher means SA algorithm has slower convergence.</li>
<li>For reduce rate, lower means SA algorithm has faster convergence.</li>
</ul>
</li>
<li>How to set initial temperature and reduce rate:<ul>
<li>If there is a better initial token, and want to search based on this token, we suggest start search
experiment in the steady state of the SA algorithm, initial temperature can be set to a small value,
such as 1.0, and reduce rate can be set to a large value, such as 0.85. If you want to start search
experiment based on the better token with greedy algorithm, which only saved current token as base
token if current score higher than base score saved in SA algorithm, reduce rate can be set to a
extremely small value, such as 0.85 ** 10.</li>
<li>If initial token is generated randomly, it means initial token is a worse token, we suggest start
search experiment in the unstable state of the SA algorithm, explore all random tokens as much as
possible, and get a better token. Initial temperature can be set a higher value, such as 1000.0,
and reduce rate can be set to a small value.</li>
</ul>
</li>
</ul>
</div>
<dl class="method">
<dt id="paddleslim.nas.sa_nas.SANAS.current_info">
<code class="descname">current_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#paddleslim.nas.sa_nas.SANAS.current_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current information, including best tokens, best reward in all the search, and current token.
:returns: a dictionary include best tokens, best reward and current reward.
:rtype: dict&lt;name, value&gt;</p>
</dd></dl>

<dl class="method">
<dt id="paddleslim.nas.sa_nas.SANAS.next_archs">
<code class="descname">next_archs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#paddleslim.nas.sa_nas.SANAS.next_archs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get next model architectures.
:returns: A list of instance of model architecture.
:rtype: list&lt;function&gt;</p>
</dd></dl>

<dl class="method">
<dt id="paddleslim.nas.sa_nas.SANAS.reward">
<code class="descname">reward</code><span class="sig-paren">(</span><em>score</em><span class="sig-paren">)</span><a class="headerlink" href="#paddleslim.nas.sa_nas.SANAS.reward" title="Permalink to this definition">¶</a></dt>
<dd><p>Return reward of current searched network.
:param score: The score of current searched network, bigger is better.
:type score: float</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True means updating successfully while false means failure.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="paddleslim.nas.sa_nas.SANAS.tokens2arch">
<code class="descname">tokens2arch</code><span class="sig-paren">(</span><em>tokens</em><span class="sig-paren">)</span><a class="headerlink" href="#paddleslim.nas.sa_nas.SANAS.tokens2arch" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert tokens to model architectures.
Args</p>
<blockquote>
<div>tokens&lt;list&gt;: A list of token. The length and range based on search space.:</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A model architecture instance according to tokens.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list&lt;function&gt;</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="paddleslim.nas.one_shot.html" class="btn btn-neutral float-right" title="paddleslim.nas.one_shot package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="paddleslim.quant.html" class="btn btn-neutral" title="paddleslim.quant package" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, paddleslim.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>